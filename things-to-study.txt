

#!/bin/bash

# Variables
EMAIL="your_email@example.com" # Change to your email address
SUBJECT="Error Detected in Rendering/Sourcing/Sync Process"
BODY=""
ERROR_FOUND=0

# Read from a file containing the data (or use a command to get the data dynamically)
# Example assumes the data is in a file named `data.txt` in the format:
# NAME    RENDERINGCOMMIT    RENDERINGERRORCOUNT    SOURCEcommit    SOURCEERRORCOUNT    SYNcommit    SYNCERRORCOUNT

while read -r NAME RENDERINGCOMMIT RENDERINGERRORCOUNT SOURCEcommit SOURCEERRORCOUNT SYNcommit SYNCERRORCOUNT; do
  # Skip header or empty lines
  [[ "$NAME" == "NAME" || -z "$NAME" ]] && continue

  # Check if any error count is not empty (non-zero)
  if [[ "$RENDERINGERRORCOUNT" -ne 0 || "$SOURCEERRORCOUNT" -ne 0 || "$SYNCERRORCOUNT" -ne 0 ]]; then
    ERROR_FOUND=1
    BODY+="Error in $NAME: Rendering Errors=$RENDERINGERRORCOUNT, Source Errors=$SOURCEERRORCOUNT, Sync Errors=$SYNCERRORCOUNT\n"
  fi
done < data.txt

# If any errors found, send email
if [[ "$ERROR_FOUND" -eq 1 ]]; then
  echo -e "$BODY" | mail -s "$SUBJECT" "$EMAIL"
  echo "Email sent to $EMAIL."
else
  echo "No errors found."
fi

